# üè† –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞ / Real Estate Price Prediction in Saint-Petersburg

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è. 
–í–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π MLOps —Ü–∏–∫–ª: –æ—Ç —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–¥–µ–ª–µ–π –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üìä –û –ø—Ä–æ–µ–∫—Ç–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π end-to-end —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Ü–µ–Ω –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ. 
–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:

- **–ü–æ–ª–Ω—ã–π EDA –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É** –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DVC –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
- **–û–±—É—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö ML-–º–æ–¥–µ–ª–µ–π** —Å —Ç—Ä–µ–∫–∏–Ω–≥–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ MLflow
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö** —Å –ø–æ–º–æ—â—å—é DVC –∏ MinIO
- **REST API** –Ω–∞ FastAPI –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –Ω–∞ Streamlit
- **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é** –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- **–ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- **S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** MinIO –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker
- Docker Compose
- Python 3.9+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/lodygin-mikhail/Real_Estate_Saint_Petersburg.git
cd Real_Estate_Saint_Petersburg

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞
cp .env.example .env

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env —Ñ–∞–π–ª–µ

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –ò–ª–∏ —Å –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤
docker-compose up
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

- **FastAPI API:** http://localhost:6000
- **FastAPI Docs:** http://localhost:6000/docs
- **Streamlit App:** http://localhost:8501
- **MLflow UI:** http://localhost:5000
- **PgAdmin:** http://localhost:5050
- **MinIO Console:** http://localhost:9001

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
Real_Estate_Saint_Petersburg/
‚îú‚îÄ‚îÄ .dvc                         # –°–ª—É–∂–µ–±–Ω–∞—è –ø–∞–ø–∫–∞ DVC
‚îú‚îÄ‚îÄ fastapi_service/             # FastAPI —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ fastapi_app.py           # –û—Å–Ω–æ–≤–Ω–æ–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ images/                      # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è README.md
‚îú‚îÄ‚îÄ ml_pipeline/                 # ML –ø–∞–π–ø–ª–∞–π–Ω—ã –∏ DVC
‚îÇ   ‚îú‚îÄ‚îÄ src/                     # –ö–æ–¥ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ data/                    # –î–∞–Ω–Ω—ã–µ (raw/interim/processed)
‚îÇ   ‚îú‚îÄ‚îÄ models/                  # –û–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ artifacts/               # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ç.–¥.)
‚îÇ   ‚îú‚îÄ‚îÄ notebooks/               # Jupyter –Ω–æ—É—Ç–±—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ reports/                 # –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ dvc.yaml                 # DVC –ø–∞–π–ø–ª–∞–π–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ dvc.lock                 # DVC –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ mlflow_server/               # MLflow tracking server
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ streamlit_service/           # Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ img/                     # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ streamlit_app.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ minio/                       # –î–∞–Ω–Ω—ã–µ MinIO
‚îú‚îÄ‚îÄ pgadmin/                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PgAdmin
‚îú‚îÄ‚îÄ nginx.conf                   # –ö–æ–Ω—Ñ–∏–≥ Nginx –¥–ª—è MinIO
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example                 # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md
```

## üì∏ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
### 1. –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
![screenshot](/images/streamlit_app.png)
_–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–≤–æ–¥–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏_
### 2. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
![screenshot](/images/streamlit_app_2.png)
_–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–æ–π —Ü–µ–Ω—ã –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å —Ü–µ–Ω—É"_

## üõ†Ô∏è –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ML –ø–∞–π–ø–ª–∞–π–Ω–∞
```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É ML –ø–∞–π–ø–ª–∞–π–Ω–∞
cd ml_pipeline

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ DVC remote
```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .dvc/config –Ω–∞ —Å–≤–æ–∏
url = s3://your_bucket_name
endpointurl = https://s3.your_cloud_s3_storage
```
#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è S3
```bash
# –î–ª—è Linux:
export AWS_ACCESS_KEY_ID="your_aws_access_key_id" 
export AWS_SECRET_ACCESS_KEY="your_secret_access_key"
```

```bash
# –î–ª—è Windows:
$env:AWS_ACCESS_KEY_ID="your_aws_access_key_id" 
$env:AWS_SECRET_ACCESS_KEY="your_secret_access_key"
```

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ
dvc pull

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
dvc repro
````

## üê≥ Docker –∫–æ–º–∞–Ω–¥—ã
```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose up --build fastapi-service
docker-compose up --build streamlit-web

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
docker-compose logs fastapi-service
docker-compose logs streamlit-web

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart mlflow
```

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ML —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏
### –†–∞–±–æ—Ç–∞ —Å DVC –ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏

```bash
cd ml_pipeline

# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
dvc repro

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç–∞–¥–∏–∏
dvc repro src/models/prepare_dataset
dvc repro src/models/train

# –ü—Ä–æ—Å–º–æ—Ç—Ä –≥—Ä–∞—Ñ–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞
dvc dag
```
## üîå API Endpoints

### **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ü–µ–Ω—ã**
**POST** `/predict`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "flat_status": false,
    "num_of_rooms": 2,
    "total_area_m2": 45.5,
    "living_area_m2": 28.0,
    "kitchen_area_m2": 10.5,
    "floor": 5,
    "metro_station": "–ü–ª–æ—â–∞–¥—å –í–æ—Å—Å—Ç–∞–Ω–∏—è",
    "minutes_to_metro": 15,
    "transfer_type": "–ø–µ—à–∫–æ–º",
    "house_age": 20,
    "is_future_building": false
}
```
**–û—Ç–≤–µ—Ç:**
```json
{
  "prediction": {
    "price": 7610252.757031128
  }
}
```
### –î—Ä—É–≥–∏–µ endpoints
- **GET** `/` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ API
- **GET** `/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License ¬© 2025
