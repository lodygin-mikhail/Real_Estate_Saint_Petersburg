schema: '2.0'
stages:
  clean_data:
    cmd: python src/data/clean_data.py data/raw/Spb_flats_prices.csv 
      data/interim/cleaned_data.csv
    deps:
    - path: data/raw/Spb_flats_prices.csv
      hash: md5
      md5: ca31020081f09862dba0602e28843257
      size: 251334
    - path: src/data/clean_data.py
      hash: md5
      md5: 5b019ea32c39002b7725d0f1d5bff821
      size: 1766
    outs:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: 3bc95c6742dc59d1d6b220a9f8093922
      size: 219398
  add_features:
    cmd: python src/features/add_features.py data/interim/cleaned_data.csv 
      data/processed/dataset.csv artifacts/unique_values.json
    deps:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: 3bc95c6742dc59d1d6b220a9f8093922
      size: 219398
    - path: src/features/add_features.py
      hash: md5
      md5: 1b1edf2166e4656b0e9ad8f4615569c9
      size: 2970
    outs:
    - path: artifacts/unique_values.json
      hash: md5
      md5: 4781a5389a90828907aaf2a1850e1772
      size: 2471
    - path: data/processed/dataset.csv
      hash: md5
      md5: df4012e43037f4dc42501c7c5c49b245
      size: 87435
  prepare_dataset:
    cmd: python src/models/prepare_datasets.py data/processed/dataset.csv 
      data/processed/train.csv data/processed/test.csv
    deps:
    - path: data/processed/dataset.csv
      hash: md5
      md5: df4012e43037f4dc42501c7c5c49b245
      size: 87435
    - path: src/models/prepare_datasets.py
      hash: md5
      md5: ea718eeb3faae08ff5b08aaef3ad4ca4
      size: 600
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: b648fc65e28f40c717c7f55e00447b75
      size: 20635
    - path: data/processed/train.csv
      hash: md5
      md5: 2c5878ab95710c627f6026c2042a02db
      size: 61840
  train:
    cmd: python src/models/train.py data/processed/train.csv 
      data/processed/test.csv models/model.joblib
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: b648fc65e28f40c717c7f55e00447b75
      size: 20635
    - path: data/processed/train.csv
      hash: md5
      md5: 2c5878ab95710c627f6026c2042a02db
      size: 61840
    - path: src/models/train.py
      hash: md5
      md5: d5a3b341a73d26b5f536ad11816e8bac
      size: 2636
    outs:
    - path: models/model.joblib
      hash: md5
      md5: f5bcfbf3a9031427b77051a543051279
      size: 241846
  evaluate:
    cmd: python src/models/evaluate.py data/processed/test.csv 
      models/model.joblib reports/scores.csv
    deps:
    - path: models/model.joblib
      hash: md5
      md5: f5bcfbf3a9031427b77051a543051279
      size: 241846
    - path: src/models/evaluate.py
      hash: md5
      md5: 2284f10f6dcab645ae738089970f3e4b
      size: 882
    outs:
    - path: reports/scores.csv
      hash: md5
      md5: d9227808b26fa1fb5d30c398ed01b9e9
      size: 48
