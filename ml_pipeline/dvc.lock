schema: '2.0'
stages:
  clean_data:
    cmd: python src/data/clean_data.py data/raw/Spb_flats_prices.csv 
      data/interim/cleaned_data.csv
    deps:
    - path: data/raw/Spb_flats_prices.csv
      hash: md5
      md5: ca31020081f09862dba0602e28843257
      size: 251334
    - path: src/data/clean_data.py
      hash: md5
      md5: a6d21aabf311d8cfb3f8c7528d4363cc
      size: 1943
    outs:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: 0a5ef83a07a8d16673b837116bf78bcb
      size: 196512
  add_features:
    cmd: python src/features/add_features.py data/interim/cleaned_data.csv 
      data/processed/dataset.csv artifacts/unique_values.json
    deps:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: 0a5ef83a07a8d16673b837116bf78bcb
      size: 196512
    - path: src/features/add_features.py
      hash: md5
      md5: 8366a5d591dde6a0cb66ff1e1da7904d
      size: 3182
    outs:
    - path: artifacts/unique_values.json
      hash: md5
      md5: dc4a52b19448df60ab6113288dcdb236
      size: 2964
    - path: data/processed/dataset.csv
      hash: md5
      md5: e72f95fa23c53210928698783248af81
      size: 78486
  prepare_dataset:
    cmd: python src/models/prepare_datasets.py data/processed/dataset.csv 
      data/processed/train.csv data/processed/test.csv
    deps:
    - path: data/processed/dataset.csv
      hash: md5
      md5: e72f95fa23c53210928698783248af81
      size: 78486
    - path: src/models/prepare_datasets.py
      hash: md5
      md5: ea718eeb3faae08ff5b08aaef3ad4ca4
      size: 600
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: bd3596edb8a022f291d38ef2a26e185b
      size: 18583
    - path: data/processed/train.csv
      hash: md5
      md5: df1fbadbaeb8fe1971590354ca810eca
      size: 55144
  train:
    cmd: python src/models/train.py data/processed/train.csv 
      data/processed/test.csv models/model.joblib reports/metrics.json
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: bd3596edb8a022f291d38ef2a26e185b
      size: 18583
    - path: data/processed/train.csv
      hash: md5
      md5: df1fbadbaeb8fe1971590354ca810eca
      size: 55144
    - path: src/models/train.py
      hash: md5
      md5: 1356de08f4ae67be5e67c0180c1d134d
      size: 5546
    outs:
    - path: models/model.joblib
      hash: md5
      md5: b3937ccbb9bb41ddb6cfccdb1b5740a4
      size: 219506
    - path: reports/metrics.json
      hash: md5
      md5: dca1adf4202762bd1ae00d1bad956137
      size: 98
  evaluate:
    cmd: python src/models/evaluate.py data/processed/test.csv 
      models/model.joblib reports/scores.csv
    deps:
    - path: models/model.joblib
      hash: md5
      md5: f5bcfbf3a9031427b77051a543051279
      size: 241846
    - path: src/models/evaluate.py
      hash: md5
      md5: 2284f10f6dcab645ae738089970f3e4b
      size: 882
    outs:
    - path: reports/scores.csv
      hash: md5
      md5: d9227808b26fa1fb5d30c398ed01b9e9
      size: 48
