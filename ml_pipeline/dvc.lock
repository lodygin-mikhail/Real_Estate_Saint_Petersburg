schema: '2.0'
stages:
  clean_data:
    cmd: python src/data/clean_data.py data/raw/Spb_flats_prices.csv 
      data/interim/cleaned_data.csv
    deps:
    - path: data/raw/Spb_flats_prices.csv
      hash: md5
      md5: ca31020081f09862dba0602e28843257
      size: 251334
    - path: src/data/clean_data.py
      hash: md5
      md5: 2ab73fc9f48eee4f4960d478577e36dc
      size: 1767
    outs:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: 11ec32803551f94036bdcb5fc054be59
      size: 197234
  add_features:
    cmd: python src/features/add_features.py data/interim/cleaned_data.csv 
      data/processed/dataset.csv artifacts/unique_values.json
    deps:
    - path: data/interim/cleaned_data.csv
      hash: md5
      md5: 11ec32803551f94036bdcb5fc054be59
      size: 197234
    - path: src/features/add_features.py
      hash: md5
      md5: 8366a5d591dde6a0cb66ff1e1da7904d
      size: 3182
    outs:
    - path: artifacts/unique_values.json
      hash: md5
      md5: 076a54319f37a95acb8f32a57825b803
      size: 2965
    - path: data/processed/dataset.csv
      hash: md5
      md5: 81be520495785d48b477d80624b25b4f
      size: 78775
  prepare_dataset:
    cmd: python src/models/prepare_datasets.py data/processed/dataset.csv 
      data/processed/train.csv data/processed/test.csv
    deps:
    - path: data/processed/dataset.csv
      hash: md5
      md5: 81be520495785d48b477d80624b25b4f
      size: 78775
    - path: src/models/prepare_datasets.py
      hash: md5
      md5: ea718eeb3faae08ff5b08aaef3ad4ca4
      size: 600
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 3ac6376938a83f8bdb0e9d628cc82a04
      size: 18659
    - path: data/processed/train.csv
      hash: md5
      md5: 9aac1c7c729a079b911b42d3f6699d4b
      size: 55357
  train:
    cmd: python src/models/train.py data/processed/train.csv 
      data/processed/test.csv models/model.joblib reports/metrics.json
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: 3ac6376938a83f8bdb0e9d628cc82a04
      size: 18659
    - path: data/processed/train.csv
      hash: md5
      md5: 9aac1c7c729a079b911b42d3f6699d4b
      size: 55357
    - path: src/models/train.py
      hash: md5
      md5: 7bc6f3d73e089756c26a955f36756b6f
      size: 5541
    outs:
    - path: models/model.joblib
      hash: md5
      md5: b7d554cda9c0e021a08415d0cb0720ad
      size: 219156
    - path: reports/metrics.json
      hash: md5
      md5: 66e2363a6a9a8d9705ff479dd7edba0c
      size: 98
  evaluate:
    cmd: python src/models/evaluate.py data/processed/test.csv 
      models/model.joblib reports/scores.csv
    deps:
    - path: models/model.joblib
      hash: md5
      md5: f5bcfbf3a9031427b77051a543051279
      size: 241846
    - path: src/models/evaluate.py
      hash: md5
      md5: 2284f10f6dcab645ae738089970f3e4b
      size: 882
    outs:
    - path: reports/scores.csv
      hash: md5
      md5: d9227808b26fa1fb5d30c398ed01b9e9
      size: 48
